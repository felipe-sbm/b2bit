{"ast":null,"code":"var _jsxFileName = \"/home/samuel/dev/b2bit/src/contexts/Auth/AuthProvider.tsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { useApi } from \"../../hooks/useApi\";\nimport { AuthContext } from \"./AuthContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AuthProvider = ({\n  children\n}) => {\n  _s();\n  const [user, setUser] = useState(null);\n  const api = useApi();\n  useEffect(() => {\n    const validateToken = async () => {\n      const storageData = localStorage.getItem('authToken');\n      if (storageData) {\n        const data = await api.validateToken(storageData);\n        if (data.user) {\n          setUser(data.user);\n        }\n      }\n    };\n    validateToken();\n  }, [api]);\n  const signIn = async (email, password) => {\n    const data = await api.signin(email, password);\n    if (data.user && data.token) {\n      setUser(data.user);\n      setToken(data.token);\n      return true;\n    }\n    return false;\n  };\n  const signOut = async () => {\n    console.log('A saída do usuário está sendo processada...');\n    setUser(null);\n    setToken(\"\");\n    await api.logout();\n  };\n  const setToken = token => {\n    localStorage.setItem('authToken', token);\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      user,\n      signIn,\n      signOut\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 5\n  }, this);\n};\n_s(AuthProvider, \"/S2GVsTmHFLNzZ6vepIVAoo+nTk=\", false, function () {\n  return [useApi];\n});\n_c = AuthProvider;\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["useEffect","useState","useApi","AuthContext","jsxDEV","_jsxDEV","AuthProvider","children","_s","user","setUser","api","validateToken","storageData","localStorage","getItem","data","signIn","email","password","signin","token","setToken","signOut","console","log","logout","setItem","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/home/samuel/dev/b2bit/src/contexts/Auth/AuthProvider.tsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { useApi } from \"../../hooks/useApi\";\nimport { User } from \"../../types/User\";\nimport { AuthContext } from \"./AuthContext\";\n\nexport const AuthProvider = ({ children }: { children: JSX.Element }) => {\n  const [user, setUser] = useState<User | null>(null);\n  const api = useApi();\n\n  useEffect(() => {\n    const validateToken = async () => {\n      const storageData = localStorage.getItem('authToken');\n      if (storageData) {\n        const data = await api.validateToken(storageData);\n        if (data.user) {\n          setUser(data.user);\n        }\n      }\n    };\n    validateToken();\n  }, [api]);\n\n  const signIn = async (email: string, password: string) => {\n    const data = await api.signin(email, password);\n    if (data.user && data.token) {\n      setUser(data.user);\n      setToken(data.token);\n      return true;\n    }\n    return false;\n  };\n  const signOut = async () => {\n    console.log('A saída do usuário está sendo processada...');\n    setUser(null);\n    setToken(\"\");\n    await api.logout();\n  };\n  const setToken = (token: string) => {\n    localStorage.setItem('authToken', token);\n  };\n\n  return (\n    <AuthContext.Provider value={{ user, signIn, signOut }}>\n      {children}\n    </AuthContext.Provider>\n  );\n};\n"],"mappings":";;AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,SAASC,MAAM,QAAQ,oBAAoB;AAE3C,SAASC,WAAW,QAAQ,eAAe;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE5C,OAAO,MAAMC,YAAY,GAAGA,CAAC;EAAEC;AAAoC,CAAC,KAAK;EAAAC,EAAA;EACvE,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGT,QAAQ,CAAc,IAAI,CAAC;EACnD,MAAMU,GAAG,GAAGT,MAAM,CAAC,CAAC;EAEpBF,SAAS,CAAC,MAAM;IACd,MAAMY,aAAa,GAAG,MAAAA,CAAA,KAAY;MAChC,MAAMC,WAAW,GAAGC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC;MACrD,IAAIF,WAAW,EAAE;QACf,MAAMG,IAAI,GAAG,MAAML,GAAG,CAACC,aAAa,CAACC,WAAW,CAAC;QACjD,IAAIG,IAAI,CAACP,IAAI,EAAE;UACbC,OAAO,CAACM,IAAI,CAACP,IAAI,CAAC;QACpB;MACF;IACF,CAAC;IACDG,aAAa,CAAC,CAAC;EACjB,CAAC,EAAE,CAACD,GAAG,CAAC,CAAC;EAET,MAAMM,MAAM,GAAG,MAAAA,CAAOC,KAAa,EAAEC,QAAgB,KAAK;IACxD,MAAMH,IAAI,GAAG,MAAML,GAAG,CAACS,MAAM,CAACF,KAAK,EAAEC,QAAQ,CAAC;IAC9C,IAAIH,IAAI,CAACP,IAAI,IAAIO,IAAI,CAACK,KAAK,EAAE;MAC3BX,OAAO,CAACM,IAAI,CAACP,IAAI,CAAC;MAClBa,QAAQ,CAACN,IAAI,CAACK,KAAK,CAAC;MACpB,OAAO,IAAI;IACb;IACA,OAAO,KAAK;EACd,CAAC;EACD,MAAME,OAAO,GAAG,MAAAA,CAAA,KAAY;IAC1BC,OAAO,CAACC,GAAG,CAAC,6CAA6C,CAAC;IAC1Df,OAAO,CAAC,IAAI,CAAC;IACbY,QAAQ,CAAC,EAAE,CAAC;IACZ,MAAMX,GAAG,CAACe,MAAM,CAAC,CAAC;EACpB,CAAC;EACD,MAAMJ,QAAQ,GAAID,KAAa,IAAK;IAClCP,YAAY,CAACa,OAAO,CAAC,WAAW,EAAEN,KAAK,CAAC;EAC1C,CAAC;EAED,oBACEhB,OAAA,CAACF,WAAW,CAACyB,QAAQ;IAACC,KAAK,EAAE;MAAEpB,IAAI;MAAEQ,MAAM;MAAEM;IAAQ,CAAE;IAAAhB,QAAA,EACpDA;EAAQ;IAAAuB,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACW,CAAC;AAE3B,CAAC;AAACzB,EAAA,CAzCWF,YAAY;EAAA,QAEXJ,MAAM;AAAA;AAAAgC,EAAA,GAFP5B,YAAY;AAAA,IAAA4B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}